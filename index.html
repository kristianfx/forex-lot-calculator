<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FX-Lot-Calculator-LIVE-v3.5-alpha 1</title>
<style>
  :root{
    --bg1:#021b3a; --bg2:#000810; --panel:#0b1020; --ink:#e8f1ff; --muted:#9db3d9;
    --b1:#00b3ff; --b2:#003b8e; --ok:#73f7c6; --warn:#ffcc66; --bad:#ff6b6b;
    --green:#00ff66; --amber:#ffaa00; --red:#ff0033;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink);
    background:radial-gradient(1200px 700px at 12% 10%,#09264e 0%,#061737 55%,#031020 100%),
               linear-gradient(180deg,var(--bg1),var(--bg2)); min-height:100vh;
  }
  h1{
    margin:30px 0 10px; text-align:center; font-size:44px;
    background:linear-gradient(90deg,#a7dcff,#37d0ff,#6eb1ff);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow:0 0 18px rgba(55,208,255,.25);
  }
  .wrap{max-width:1100px;margin:0 auto;padding:0 16px 48px;
        display:grid;grid-template-columns:260px 1fr 260px;gap:24px;align-items:start;}
  .side{height:520px;display:flex;align-items:center;justify-content:center;filter:drop-shadow(0 24px 40px rgba(0,0,0,.55));}
  .icon{width:220px;height:220px;background:linear-gradient(145deg,rgba(0,157,255,.35),rgba(0,59,142,.5));
        box-shadow:inset 0 0 35px rgba(0,0,0,.35),0 18px 40px rgba(0,0,0,.35);border-radius:28px;position:relative;}
  .icon.calc:before,.icon.calc:after{content:"";position:absolute;left:15%;width:70%;height:12px;border-radius:999px;
        background:linear-gradient(90deg,#7fd6ff,#2fb8ff);top:64px;box-shadow:0 6px 18px rgba(55,208,255,.38)}
  .icon.calc:after{top:112px;width:50%;left:25%}
  .icon.coin{border-radius:50%}
  .icon.coin:before{content:"";position:absolute;inset:14px;border-radius:50%;
     border:6px solid rgba(160,220,255,.65);box-shadow:inset 0 0 24px rgba(55,208,255,.45)}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));
        border:1px solid rgba(90,150,220,.2);border-radius:20px;padding:22px;max-width:560px;margin:0 auto;
        box-shadow:0 20px 40px rgba(0,0,0,.38);}
  label{display:block;margin:12px 0 6px;color:#cfe6ff;font-weight:600}
  input,select{width:100%;padding:12px 14px;background:#0a1528;color:#fff;border:1px solid rgba(120,180,255,.22);
                border-radius:12px;outline:none;font-size:15px;transition:box-shadow .2s,border-color .2s}
  input:focus,select:focus{border-color:#37d0ff;box-shadow:0 0 0 4px rgba(55,208,255,.18)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  .toggle{display:flex;align-items:center;gap:8px;margin-top:6px}
  .status{font-size:13px;margin:6px 0;min-height:18px;text-align:left}
  .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  button{width:100%;padding:14px 16px;border:none;border-radius:14px;color:#fff;cursor:pointer;font-weight:700;font-size:16px;
         background:linear-gradient(90deg,var(--b1),var(--b2));box-shadow:0 10px 24px rgba(0,126,255,.35)}
  button:hover{box-shadow:0 12px 28px rgba(0,126,255,.45)}
  .input-with-btn{position:relative}

  /* --- NEW unified field wrapper for Entry Price (aligns glow) --- */
  .form-field{
    position:relative;
    border-radius:12px;
  }
  .form-field input{
    position:relative;
    z-index:2;
    width:100%;
    background:#0a1528;
    color:#fff;
    border:1px solid rgba(120,180,255,.22);
    border-radius:inherit;
    padding:12px 40px 12px 14px;
    font-size:15px;
    outline:none;
  }
  .form-field::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:inherit;
    z-index:1;
    pointer-events:none;
    box-shadow:0 0 0 1px rgba(104,160,255,.18) inset, 0 18px 28px -18px rgba(88,140,255,.45);
    opacity:.8;
    transition:opacity .3s ease, box-shadow .3s ease;
  }
  /* reactive pulse */
  .form-field.reactive-glow::after{
    opacity:1;
    box-shadow:0 0 0 2px rgba(55,208,255,.5) inset, 0 0 25px 5px rgba(55,208,255,.4);
  }
  .retry{position:absolute;right:6px;top:6px;padding:8px 10px;border:none;border-radius:10px;
         background:rgba(0,179,255,.14);color:#bfeaff;font-weight:700;cursor:pointer;z-index:3}
  .retry:hover{background:rgba(0,179,255,.25)}

  .hint{color:var(--muted);font-size:12px;margin-top:4px}
  .liveBadge{
    width:12px;height:12px;border-radius:50%;margin-left:8px;
    box-shadow:0 0 12px rgba(0,255,102,.6);
    border:2px solid rgba(255,255,255,.15);
    transition:background-color .4s linear,box-shadow .4s linear;
    display:inline-block;
  }
  .inlineFlex{display:flex;align-items:center;gap:6px}
  .lastUpdated{font-size:12px;color:#a7b9db;margin-top:4px}
  .fade{animation:fadeIn .45s ease}
  @keyframes fadeIn{from{opacity:.4}to{opacity:1}}
  @media(max-width:980px){.wrap{grid-template-columns:1fr;gap:16px}.side{display:none}}
  .valueCard{margin-top:10px;padding:10px;border-radius:12px;background:rgba(0,0,0,.25);border:1px solid rgba(120,180,255,.2)}
</style>
</head>
<body>
<h1>Forex Lot Size Calculator</h1>
<div class="wrap">
  <div class="side"><div class="icon calc" title="calculator"></div></div>

  <div class="card">
    <!-- unchanged fields -->
    <div class="row">
      <div><label for="balance">Account Balance</label><input id="balance" type="number" placeholder="e.g. 1000"></div>
      <div><label for="acct">Account Currency</label>
        <select id="acct"><option>GBP</option><option>USD</option><option>EUR</option><option>JPY</option>
          <option>AUD</option><option>CAD</option><option>NZD</option><option>CHF</option><option>SGD</option><option>ZAR</option></select>
      </div>
    </div>

    <label for="risk">Risk Percentage (%)</label><input id="risk" type="number" placeholder="e.g. 2">

    <label for="pair">Currency / Crypto / Metal Pair</label>
    <input id="pair" list="pairs" placeholder="Type or pick e.g. GBP/JPY, BTC/USD, XAU/USD">
    <datalist id="pairs">
      <option value="EUR/USD"><option value="GBP/USD"><option value="USD/JPY"><option value="AUD/USD"><option value="USD/CAD">
      <option value="USD/CHF"><option value="EUR/GBP"><option value="EUR/JPY"><option value="GBP/JPY"><option value="AUD/JPY">
      <option value="EUR/AUD"><option value="EUR/CAD"><option value="GBP/AUD"><option value="CAD/JPY"><option value="NZD/USD"><option value="AUD/NZD">
    </datalist>

    <div class="toggle inlineFlex">
      <input id="live" type="checkbox" checked>
      <label for="live">Enable Live Price Auto-Fill (30s refresh)</label>
      <span id="liveBadge" class="liveBadge" title="Live price indicator"></span>
    </div>

    <!-- fixed entry field -->
    <label for="entry">Entry Price</label>
    <div class="form-field" id="entryWrapper">
      <input id="entry" type="number" step="0.00001" placeholder="auto">
      <button id="retry" class="retry" title="Retry live price">ðŸ”„</button>
    </div>
    <div id="status" class="status"></div>
    <div id="lastUpdated" class="lastUpdated"></div>

    <div class="row">
      <div><label for="sl">Stop Loss Price</label><input id="sl" type="number" step="0.00001" placeholder="e.g. 1.08300"></div>
      <div><label for="tp">Take Profit (optional)</label><input id="tp" type="number" step="0.00001" placeholder="e.g. 1.09500"></div>
    </div>

    <button id="calc">Calculate Lot Size</button>
    <div id="out" class="status" style="text-align:center"></div>
    <div id="valueCard" class="valueCard" style="display:none"></div>
  </div>

  <div class="side"><div class="icon coin" title="coin"></div></div>
</div>

<script>
const qs=id=>document.getElementById(id);
const badge=qs('liveBadge');
function setBadgeColor(sec){
  let color=getComputedStyle(document.documentElement).getPropertyValue('--green');
  if(sec>=25)color=getComputedStyle(document.documentElement).getPropertyValue('--red');
  else if(sec>=10)color=getComputedStyle(document.documentElement).getPropertyValue('--amber');
  badge.style.backgroundColor=color.trim();
  badge.style.boxShadow=`0 0 12px ${color.trim()}`;
}

/* simulate your live update call: just hook into existing updateLive() later */
function reactivePulse(){
  const el=qs('entryWrapper');
  el.classList.add('reactive-glow');
  setTimeout(()=>el.classList.remove('reactive-glow'),450);
}

/* EXAMPLE usage: when entry value changes */
qs('entry').addEventListener('input',reactivePulse);
qs('retry').addEventListener('click',reactivePulse);
</script>
</body>
</html>
